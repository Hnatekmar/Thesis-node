!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.simulation=n():e.simulation=n()}(global,function(){return function(e){var n={};function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(o,r,function(n){return e[n]}.bind(null,r));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=0)}([function(e,n,t){var o=t(1),r=t(2),i=t(3),u=t(4);if(i.isMaster)!function(){var e=t(5),n=new e("postgres","postgres","example",{dialect:"postgres",host:"192.168.1.52"}),a=t(6)(n,e);a.sync({force:!0});for(var s=u.cpus().length,l=new o.Neat(37,6,null,{popsize:128*s,mutation:o.methods.mutation.ALL,mutationRate:.15}),p=(Number.MIN_VALUE,[]),f=0,c=0;c<s;c++)p.push(i.fork());for(var d=0;d<s;d++)p[d].on("message",function(e){f+=1;l.population[e.index].toJSON();l.population[e.index].score=e.score,a.create({fitness:e.score,generation:l.generation})});r.chunk(l.population,l.population.length/p.length).forEach(function(e,n){var t=e.map(function(e){return e.toJSON()});p[n].send({json:t,index:Math.floor(n*(l.population.length/p.length))})}),setInterval(function(){f===l.population.length&&(!function(){l.sort(),console.log("Generation "+l.generation);for(var e=[],n=0;n<l.elitism;n++)e.push(l.population[n]);for(var t=0;t<l.popsize-l.elitism;t++)e.push(l.getOffspring());l.population=e,l.mutate(),l.generation++}(),f=0,r.chunk(l.population,l.population.length/p.length).forEach(function(e,n){var t=e.map(function(e){return e.toJSON()});p[n].send({json:t,index:Math.floor(n*(l.population.length/p.length))})}))},100)}();else{var a=new(0,t(7).JSDOM)("<!doctype html><html><body></body></html>").window;global.window=a,global.document=a.document,global.navigator={userAgent:"node.js"};var s=new(0,t(8).default)(60);process.on("message",function(e){for(var n=0;n<e.json.length;n++){var t=o.Network.fromJSON(e.json[n]),r=s.evalGenome(1/30,t);process.send({score:r,index:e.index+n})}})}},function(e,n){e.exports=require("neataptic")},function(e,n){e.exports=require("lodash")},function(e,n){e.exports=require("cluster")},function(e,n){e.exports=require("os")},function(e,n){e.exports=require("sequelize")},function(e,n){e.exports=function(e,n){return e.define("genome",{id:{type:n.INTEGER,primaryKey:!0,autoIncrement:!0},fitness:{type:n.FLOAT},generation:{type:n.INTEGER}})}},function(e,n){e.exports=require("jsdom")},function(e,n){e.exports=require("simulation")}])});